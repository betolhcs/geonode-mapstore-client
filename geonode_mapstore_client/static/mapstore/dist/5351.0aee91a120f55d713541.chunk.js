(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[5351],{31273:(e,t,r)=>{"use strict";r.d(t,{WX:()=>h,V3:()=>w,HR:()=>S,xi:()=>A,ur:()=>P,vK:()=>E,nm:()=>T,QF:()=>j,zZ:()=>C,uN:()=>R,Bz:()=>L,im:()=>x,CO:()=>D,$X:()=>G,Mt:()=>_,Oq:()=>M,YO:()=>I,PR:()=>k,wI:()=>N,bv:()=>U,mh:()=>F,$Y:()=>V,eA:()=>Z,UT:()=>B,cS:()=>H,l3:()=>W,Kz:()=>$,vg:()=>Y,xM:()=>X,do:()=>z,lb:()=>K,tt:()=>q,nX:()=>J,BG:()=>Q,Rc:()=>ee,K4:()=>te,Dw:()=>re,dL:()=>ne,In:()=>oe,r1:()=>ie,XW:()=>ae,L8:()=>ue,i3:()=>ce,XM:()=>le,X7:()=>fe,M3:()=>se,N3:()=>pe,SU:()=>ve,wo:()=>be,ye:()=>de,m:()=>ye,wl:()=>Oe,A4:()=>ge,vG:()=>he,ky:()=>we,Wf:()=>Se,Ts:()=>Ae,IT:()=>Pe,XS:()=>Ee,tx:()=>Te,We:()=>je,nx:()=>Ce,E9:()=>Re});var n=r(59551),o=r(67007),i=r(3475),a=r(32354),u=r(80416),c=r(1550),l=r(24262),f=r(37275),s=r(13311),p=r.n(s),v=r(88113),b=r(75110),d=r(97395);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g={csw:n.Z,wms:o.ZP,wmts:i.Z,backgrounds:a.Z},h="CATALOG:ADD_LAYERS_FROM_CATALOGS",w="CATALOG:TEXT_SEARCH",S="CATALOG:RECORD_LIST_LOADED",A="CATALOG:RESET_CATALOG",P="CATALOG:CATALOG_CLOSE",E="CATALOG:RECORD_LIST_LOAD_ERROR",T="CATALOG:CHANGE_CATALOG_FORMAT",j="CATALOG:ADD_LAYER_ERROR",C="CATALOG:CHANGE_SELECTED_SERVICE",R="CATALOG:CHANGE_CATALOG_MODE",L="CATALOG:CHANGE_METADATA_TEMPLATE",x="CATALOG:CHANGE_TITLE",D="CATALOG:CHANGE_TEXT",G="CATALOG:CHANGE_TYPE",_="CATALOG:CHANGE_SERVICE_PROPERTY",M="CATALOG:CHANGE_SERVICE_FORMAT",I="CATALOG:FOCUS_SERVICES_LIST",k="CATALOG:CHANGE_URL",N="CATALOG:ADD_CATALOG_SERVICE",U="CATALOG:DELETE_CATALOG_SERVICE",F="CATALOG:ADD_SERVICE",V="CATALOG:DELETE_SERVICE",Z="CATALOG:SAVING_SERVICE",B="CATALOG:GET_METADATA_RECORD_BY_ID",H="CATALOG:SET_LOADING",W="CATALOG:TOGGLE_TEMPLATE",$="CATALOG:TOGGLE_THUMBNAIL",Y="CATALOG:TOGGLE_ADVANCED_SETTINGS",X="CATALOG:FORMAT_OPTIONS_FETCH",z="CATALOG:FORMAT_OPTIONS_LOADING",K="CATALOG:SET_FORMAT_OPTIONS";function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.format,r=e.url,n=e.startPosition,o=e.maxRecords,i=e.text,a=e.options,u=void 0===a?{}:a;return{type:w,format:t,url:r,startPosition:n,maxRecords:o,text:i,options:u}}function J(e,t){return{type:S,searchOptions:e,result:t}}function Q(e){return{type:T,format:e}}function ee(e){return{type:Z,status:e}}function te(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:H,loading:e}}function re(e){return{type:C,service:e}}function ne(e){return{type:I,status:e}}function oe(e,t){return{type:R,mode:e,isNew:t}}function ie(e){return{type:x,title:e}}function ae(e){return{type:D,text:e}}function ue(e,t){return{type:_,property:e,value:t}}function ce(e){return{type:M,format:e}}function le(e){return{type:G,newType:e}}function fe(e){return{type:k,url:e}}function se(){return{type:F}}function pe(e){return{type:N,service:e}}function ve(e){return{type:U,service:e}}function be(){return{type:V}}function de(){return{type:A}}function ye(e){return{type:E,error:e}}function Oe(){return{type:P}}function me(e,t){return{type:"CATALOG:DESCRIBE_ERROR",layer:e,error:t}}var ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.zoomToLayer,n=void 0!==r&&r;return function(t,r){var o=r(),i=(0,b.l2)(o),a=(0,l.R8)(e,i||[]);return t((0,u.A4)(O(O({},e),{},{id:a}))),n&&e.bbox&&t((0,c.Px)(e.bbox.bounds,e.bbox.crs)),"wms"===e.type?g.wms.describeLayers((0,l.Hi)(e),e.name).then((function(r){if(r){var n=p()(r,(function(t){return t.name===e.name}));if(n&&"WFS"===n.owsType){var i=f.jQ(f.$F(n.owsURL),(0,v.kS)(o));t((0,u.He)(a,{search:{url:i,type:"wfs"}}))}}})).catch((function(r){return t(me(e,r))})):null}};function he(e){return{type:j,error:e}}function we(e){return{type:B,metadataOptions:e}}var Se=function(e){return{type:L,metadataTemplate:e}},Ae=function(){return{type:Y}},Pe=function(){return{type:W}},Ee=function(){return{type:$}},Te=function(e){return{type:X,url:e}},je=function(e){return{type:z,loading:e}},Ce=function(e,t){return{type:K,formats:e,url:t}};function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,d.vU)({title:"catalog.notification.errorTitle",message:"catalog.notification.errorSearchingRecords",values:{records:e}})}},64152:(e,t,r)=>{"use strict";r.d(t,{Z:()=>se});var n={};r.r(n),r.d(n,{getRecords:()=>$,testService:()=>z,textSearch:()=>Y,validate:()=>X});var o={};r.r(o),r.d(o,{getRecords:()=>ie,parseUrl:()=>oe,textSearch:()=>ae});var i=r(59551),a=r(67007),u=r(3475),c=r(37275),l=r(5055),f=r.n(l),s=r(75875),p=r.n(s),v=r(27361),b=r.n(v),d=r(84596),y=r.n(d),O=r(33044),m=r(93201);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S={},A=function(e,t){return e===t||"EPSG:3857"===e&&"EPSG:900913"===t||"EPSG:900913"===e&&"EPSG:3857"===t},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=y()(b()(e,"TileMapService.TileMaps.TileMap",[])),a=o.projection,u=b()(o,"options.service.allSRS"),c=i.map((function(t){var r=t.$,n=void 0===r?{}:r;return h(h({},n),{},{href:(0,O.cleanAuthParamsFromURL)(n.href),identifier:(0,O.cleanAuthParamsFromURL)(n.href),format:(0,m.A)(n.href),tmsUrl:(0,O.cleanAuthParamsFromURL)(e.url)})})).filter((function(e){var t=e.srs;return!(a&&!u)||A(t,a)})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=void 0===t?"":t,o=e.srs,i=void 0===o?"":o;return!n||-1!==r.toLowerCase().indexOf(n.toLowerCase())||-1!==i.toLowerCase().indexOf(n.toLowerCase())}));return{numberOfRecordsMatched:c.length,numberOfRecordsReturned:Math.min(r,c.length),nextRecord:t+Math.min(r,c.length)+1,records:c.filter((function(e,n){return n>=t-1&&n<t-1+r}))}},E=function(e){return e},T=function(e,t,r,n,o){var i=S[e];return i&&(new Date).getTime()<i.timestamp+1e3*(c.ZP.getConfigProp("cacheExpire")||60)?new Promise((function(e){e(P(i.data,t,r,n,o))})):p().get(e).then((function(i){var a;return f().parseString(i.data,{explicitArray:!1},(function(t,r){a=h(h({},r),{},{url:e})})),S[e]={timestamp:(new Date).getTime(),data:a},P(a,t,r,n,o)}))},j=r(36882),C=r(49977),R=r.n(C),L=r(11847);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _="custom",M=function(e,t,r,n,o){var i,a,u,c=b()(o,"options.service"),l=[];if(c.provider&&c.provider!==_){var f=(i=c.provider,Object.keys(null!==(a=null===j.Z||void 0===j.Z||null===(u=j.Z[i])||void 0===u?void 0:u.variants)&&void 0!==a?a:{}));0===f.length?l.push({provider:"".concat(c.provider),title:"".concat(c.provider)}):l=f.map((function(e){return{provider:"".concat(c.provider,".").concat(e)}}))}else c.url&&(l=[D(D({},c),{},{title:c.title,type:"tileprovider",url:c.url,attribution:c.attribution,options:c.options||{},provider:_})]);return new Promise((function(e){e(function(e,t,r,n){var o=e.filter((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).title;return!n||-1!==(void 0===e?"":e).toLowerCase().indexOf(n.toLowerCase())})),i=o.filter((function(e,n){return n>=t-1&&n<t-1+r}));return{numberOfRecordsMatched:o.length,numberOfRecordsReturned:i.length,nextRecord:t+Math.min(r,o.length)+1,records:i}}(l,t,r,n))}))};function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function k(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function N(e){var t="function"==typeof Map?new Map:void 0;return N=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return U(e,arguments,Z(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),V(n,e)},N(e)}function U(e,t,r){return U=F()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&V(o,r.prototype),o},U.apply(null,arguments)}function F(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function V(e,t){return V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},V(e,t)}function Z(e){return Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Z(e)}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(i,e);var t,r,n,o=(t=i,r=F(),function(){var e,n=Z(t);if(r){var o=Z(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return k(this,e)});function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e)).name="ServiceValidationError",r.notification=t,r}return n=i,Object.defineProperty(n,"prototype",{writable:!1}),n}(N(Error)),H=function(e){return""===e.title||""===e.url?R().Observable.throw(new B("Validation Error","catalog.notification.warningAddCatalogService")):R().Observable.of(e)},W=function(e){var t=e.parseUrl;return function(e){var r="catalog.notification.errorServiceUrl";return R().Observable.defer((function(){return p().get(t(e.url))})).catch((function(){throw new B("Service Test error",r)})).switchMap((function(t){if(t.error||""===t.data)throw new B("Service Test error",r);return R().Observable.of(e)}))}},$=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.options,a=i||{},u=a.service,c=void 0===u?{}:u;return"tms"===c.provider&&T(e,t,r,n,o),M(0,t,r,n,o)},Y=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.options,a=i||{},u=a.service,c=void 0===u?{}:u;return"tms"===c.provider?T(e,t,r,n,o):M(0,t,r,n,o)},X=function(e){return"tms"===e.provider?H(e):function(e){var t,r=e.provider&&"custom"!==e.provider?!!e.provider:(t=e.url,(0,L.Nw)(t));if(e.title&&r)return C.Observable.of(e);throw new Error("catalog.config.notValidURLTemplate")}(e)},z=function(e){return"tms"===e.provider?W({parseUrl:E})(e):function(e){return C.Observable.of(e)}(e)},K=r(32420);function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?te(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var re={},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=y()(b()(e,'["wfs:WFS_Capabilities"].FeatureTypeList.FeatureType',[])),i=o.map((function(t){var r=t.Name,n=t.Title,o=t.Abstract,i=t.DefaultSRS,a=t.OtherSRS,u=void 0===a?[]:a,c=t["ows:WGS84BoundingBox"],l=c["ows:LowerCorner"].split(" "),f=c["ows:UpperCorner"].split(" "),s={minx:parseFloat(l[0]),miny:parseFloat(l[1]),maxx:parseFloat(f[0]),maxy:parseFloat(f[1])};return{featureType:t,type:"wfs",url:(0,O.cleanAuthParamsFromURL)(e.url),name:r,title:n,description:o,SRS:[i].concat(ee(u)),defaultSRS:i,boundingBox:{bounds:s,crs:"EPSG:4326"}}})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=void 0===t?"":t,o=e.name,i=void 0===o?"":o,a=e.description;return!n||-1!==r.toLowerCase().indexOf(n.toLowerCase())||-1!==i.toLowerCase().indexOf(n.toLowerCase())||-1!==a.toLowerCase().indexOf(n.toLowerCase())})),a=i.filter((function(e,n){return n>=t-1&&n<t-1+r}));return{numberOfRecordsMatched:i.length,numberOfRecordsReturned:Math.min(r,a.length),nextRecord:t+Math.min(r,i.length)+1,records:a}},oe=K.dN,ie=function(e,t,r,n,o){var i=re[e];return i&&(new Date).getTime()<i.timestamp+1e3*(c.ZP.getConfigProp("cacheExpire")||60)?new Promise((function(e){e(ne(i.data,t,r,n,o))})):(0,K.FU)(e).then((function(i){var a;return f().parseString(i.data,{explicitArray:!1,stripPrefix:!0},(function(t,r){a=J(J({},r),{},{url:e})})),re[e]={timestamp:(new Date).getTime(),data:a},ne(a,t,r,n,o)}))},ae=function(e,t,r,n,o){return ie(e,t,r,n,o)},ue=r(32354);function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const se={csw:le({validate:H,testService:W(i.Z)},i.Z),wfs:le({validate:H,testService:W(o)},o),wms:le({validate:H,testService:W(a.ZP)},a.ZP),tms:n,wmts:le({validate:H,testService:W(u.Z)},u.Z),backgrounds:le({validate:H,testService:W(ue.Z)},ue.Z)}},93451:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(86638),o=r(45697),i=r.n(o),a=r(84596),u=r.n(a),c=r(1469),l=r.n(c),f=r(14293),s=r.n(f),p=r(47037),v=r.n(p),b=r(67076),d=["messages"];function y(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(l()(t))return t.map((function(o){var i=(0,n.S$)(e,o[r]||v()(o)&&o||"");return m(m({},o),{},g({},r,s()(i)?t:i))}));var o=(0,n.S$)(e,t);return s()(o)?t:o},w=function(e,t,r){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return m(m({},n),{},g({},o,e[o]&&h(t,e[o],r)))}};const S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label";return(0,b.compose)((0,b.getContext)({messages:i().object}),(0,b.mapProps)((function(r){var n=r.messages,o=y(r,d);return m(m({},o),u()(e).reduce(w(o,n,t),{}))})))}},56175:(e,t,r)=>{"use strict";r.d(t,{Z:()=>X});var n=r(49977),o=r(9669),i=r.n(o),a=r(37691),u=r.n(a),c=r(30647),l=r(91175),f=r.n(l),s=r(27361),p=r.n(s),v=r(13311),b=r.n(v),d=r(1469),y=r.n(d),O=r(47037),m=r.n(O),g=r(13218),h=r.n(g),w=r(3674),S=r.n(w),A=r(93220),P=r.n(A),E=r(31273),T=r(80416),j=r(97395),C=r(82904),R=r(33528),L=r(21914),x=r(53001),D=r(88113),G=r(31935),_=r(8316),M=r(75110),I=r(76712),k=r(86267),N=r(24262),U=r(89919),F=["format","url","text"];function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||B(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){if(e){if("string"==typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(e,t):void 0}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const X=function(e){return{recordSearchEpic:function(t,r){return t.ofType(E.V3).switchMap((function(t){var o=t.format,i=t.url,a=t.startPosition,u=t.maxRecords,c=t.text,l=t.options;return n.Observable.defer((function(){return e[o].textSearch(i,a,u,c,$({options:l},(0,D.HN)(r.getState())))})).switchMap((function(e){return e.error?n.Observable.of((0,E.m)(e)):n.Observable.of((0,E.nX)({url:i,startPosition:a,maxRecords:u,text:c},e))})).startWith((0,E.K4)(!0)).catch((function(e){return n.Observable.of((0,E.m)(e))}))}))},addLayersFromCatalogsEpic:function(t,r){return t.ofType(E.WX).filter((function(e){var t=e.layers,r=e.sources;return y()(t)&&y()(r)&&t.length&&t.length===r.length})).switchMap((function(t){var o=t.layers,i=t.sources,a=t.options,u=t.startPosition,c=void 0===u?1:u,l=t.maxRecords,s=void 0===l?4:l,p=r.getState(),v=a||(0,D.bA)(p),b=(0,D.b6)(p),d=o.filter((function(e,t){return!!b[i[t]]})).map((function(t,r){var a=b[i[r]],u=a.type,l=a.url,f=o[r];return n.Observable.defer((function(){return e[u].textSearch(l,c,s,f,v).catch((function(){return{results:[]}}))})).map((function(e){return $($({},e),{},{format:u,url:l,text:f})}))}));return n.Observable.forkJoin(d).switchMap((function(e){return y()(e)&&e.length?n.Observable.of(e.map((function(e){var t=e.format,r=e.url,o=e.text,i=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,F),a=(0,_.Ps)(p),u=(0,I.eL)(t,i,v,a)||[],c=f()(u.filter((function(e){return e.identifier===o}))),l=(0,I.tW)(c),s=l.wms,b=l.wmts,d={},y={},O=(0,D.kS)(p);if(s){var m=(0,I.n0)(s.SRS);if(s.SRS.length>0&&!k.default.isAllowedSRS("EPSG:3857",m))return n.Observable.empty();d=(0,I.ll)(c,"wms",{removeParams:O,catalogURL:"csw"===t&&r?r+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+c.identifier:r},y)}else if(b){d={};var g=(0,I.n0)(b.SRS);if(b.SRS.length>0&&!k.default.isAllowedSRS("EPSG:3857",g))return n.Observable.empty();d=(0,I.ll)(c,"wmts",{removeParams:O},y)}else(0,I.FJ)(c).esri&&(d=(0,I.AD)(c,y));return c?d:o}))):n.Observable.empty()}))})).mergeMap((function(e){if(e){var t=e.filter((function(e){return m()(e)})).join(" "),r=[];return t&&(r=[(0,E.E9)(t)]),r=[].concat(Z(r),Z(e.filter((function(e){return h()(e)})).map((function(e){return(0,T.A4)(e)})))),n.Observable.from(r)}return n.Observable.empty()})).catch((function(){return n.Observable.empty()}))},newCatalogServiceAdded:function(t,r){return t.ofType(E.mh).switchMap((function(){var t=r.getState(),o=(0,D._S)(t);return n.Observable.of(o).switchMap((function(t){var r,o,i;return null!==(r=null===(o=e[t.type])||void 0===o||null===(i=o.validate)||void 0===i?void 0:i.call(o,t))&&void 0!==r?r:n.Observable.of(t)})).switchMap((function(t){var r,o,i;return null!==(r=null===(o=e[t.type])||void 0===o||null===(i=o.testService)||void 0===i?void 0:i.call(o,t))&&void 0!==r?r:n.Observable.of(t)})).switchMap((function(){return n.Observable.of((0,E.N3)(o),(0,j.Vp)({title:"notification.success",message:"catalog.notification.addCatalogService",autoDismiss:6,position:"tc"}))})).startWith((0,E.Rc)(!0)).catch((function(e){return n.Observable.of((0,j.vU)({exception:e,title:"notification.warning",message:e.notification||"catalog.notification.warningAddCatalogService",autoDismiss:6,position:"tc"}))})).concat(n.Observable.of((0,E.Rc)(!1)))}))},deleteCatalogServiceEpic:function(e,t){return e.ofType(E.$Y).switchMap((function(){var e=t.getState(),r=(0,D.Cb)(e),o=(0,D.b6)(e),i=o[r]?(0,j.Vp)({title:"notification.warning",message:"catalog.notification.serviceDeletedCorrectly",autoDismiss:6,position:"tc"}):(0,j.vU)({title:"notification.warning",message:"catalog.notification.impossibleDeleteService",autoDismiss:6,position:"tc"}),a=(0,E.SU)(r);return o[r]?n.Observable.of(i,a):n.Observable.of(i)}))},openCatalogEpic:function(e){return e.ofType(C.At).filter((function(e){return"metadataexplorer"===e.control&&e.value})).switchMap((function(){return n.Observable.of((0,R.YV)(),(0,L.g)(),(0,L.aN)())}))},getMetadataRecordById:function(t,r){return t.ofType(E.UT).switchMap((function(t){var o=t.metadataOptions,a=void 0===o?{}:o,l=r.getState(),f=(0,M.Iz)(l);return n.Observable.defer((function(){return e.wms.getCapabilities((0,N.Fh)(f))})).switchMap((function(t){var r=p()(t,"capability.layer.layer",[]),o=1===r.length?r[0].metadataURL:b()(r,(function(e){return e.name===f.name.split(":")[1]})),l=p()(b()(o,(function(e){return m()(e.type)&&"iso19115:2003"===e.type.toLowerCase()&&("application/xml"===e.format||"text/xml"===e.format)})),"onlineResource.href"),s=p()(b()(o,(function(e){return m()(e.type)&&"iso19115:2003"===e.type.toLowerCase()&&"text/html"===e.format})),"onlineResource.href"),v=b()(p()(a,"extractors",[]),(function(e){var t=e.properties,r=e.layersRegex,n=r?new RegExp(r):null;return h()(t)&&(!r||n.test(f.name))})),d=s?{metadataUrl:s}:{},y=n.Observable.defer((function(){return e.csw.getRecordById(f.catalogURL)})).switchMap((function(e){return e&&e.error?n.Observable.of((0,j.vU)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),(0,T.c9)(d,!1)):e&&e.dc?n.Observable.of((0,T.c9)($($({},d),e.dc),!1)):n.Observable.empty()})),O=n.Observable.defer((function(){return i().get(l)})).pluck("data").map((function(e){return(new c.a).parseFromString(e)})).map((function(e){var t=u().useNamespaces(a.xmlNamespaces||{});return function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return P()(r).reduce((function(r,o){var i,a=V(o,2),u=a[0],c=a[1];if(h()(c)&&m()(c.xpath)&&h()(c.properties)&&S()(c.properties).length>0)0===(i=t(c.xpath,n).map((function(t){return e(c.properties,t)}))).length&&(i=null);else{var l,f=t(c,n);1===f.length?i=null!==(l=p()(f[0],"nodeValue"))&&void 0!==l?l:p()(f[0],"childNodes[0].nodeValue"):f.length>1&&(i=f.map((function(e){return p()(e,"childNodes[0].nodeValue")})).filter((function(e){return!!e})))}return $($({},r),i?Y({},u,i):{})}),{})}(v.properties,e)})).switchMap((function(e){return n.Observable.of((0,T.c9)($($({},d),e),!1))}));return l&&v?O:f.catalogURL?y:n.Observable.of((0,T.c9)(d,!1))})).startWith((0,T.c9)({},!0)).catch((function(){return n.Observable.of((0,j.vU)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),(0,T.c9)({},!1))}))}))},autoSearchEpic:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,o=void 0===r?function(){}:r;return e.ofType(E.CO).debounce((function(){var e=o(),t=(0,D.l2)(e);return n.Observable.timer(t)})).switchMap((function(e){var t=e.text,r=o(),i=(0,D.y)(r),a=(0,D.R7)(r),u=a.type,c=a.url;return n.Observable.of((0,E.tt)({format:u,url:c,startPosition:1,maxRecords:i,text:t}))}))},catalogCloseEpic:function(e,t){return e.ofType(E.ur).switchMap((function(){var e,r=t.getState(),o=(0,G.YL)(r),i=(0,D.b6)(r);return(e=n.Observable).of.apply(e,Z([(0,C.pu)("metadataexplorer","enabled",!1,"group",null),(0,E.In)("view"),(0,E.ye)()].concat("backgroundSelector"===o?[(0,E.Dw)(f()(S()(i))),(0,x.vw)(!0)]:[])))}))},getSupportedFormatsEpic:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,o=void 0===r?function(){}:r;return e.ofType(E.xM).filter((function(e){return(0,D.CK)(o())!==(null==e?void 0:e.url)})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,r=void 0===t?"":t;return n.Observable.defer((function(){return(0,I.T6)(r,!0)})).switchMap((function(e){return n.Observable.of((0,E.nx)(e,r))})).let((0,U.hP)((0,E.We)(!0),(0,E.We)(!1),(function(){return n.Observable.of((0,j.vU)({title:"layerProperties.format.error.title",message:"layerProperties.format.error.message"}),(0,E.We)(!1))})))}))}}}},31935:(e,t,r)=>{"use strict";r.d(t,{YL:()=>u,B0:()=>c,Mz:()=>l,TC:()=>f,qS:()=>s,Pe:()=>p,TP:()=>v});var n=r(22222),o=r(75110),i=r(93152),a=r(24262),u=function(e){return e.backgroundSelector&&e.backgroundSelector.source},c=function(e){return e.backgroundSelector&&e.backgroundSelector.modalParams},l=function(e){return e.backgroundSelector&&e.backgroundSelector.backgrounds||[]},f=function(e){return e.backgroundSelector&&e.backgroundSelector.lastRemovedId},s=function(e){return e.backgroundSelector&&e.backgroundSelector.confirmDeleteBackgroundModal},p=function(e){return e.backgroundSelector&&e.backgroundSelector.allowDeletion},v=(0,n.P1)(o.l2,i.$v,(function(e,t){return e.filter((function(e){return e&&"background"===e.group})).map((function(e){return(0,a.kf)(e,t)}))||[]}))},38842:(e,t,r)=>{"use strict";r.d(t,{wk:()=>s,Yf:()=>p,c3:()=>v,fY:()=>b});var n=r(18721),o=r.n(n),i=r(27361),a=r.n(i),u=r(13311),c=r.n(u),l=r(22222),f=r(8316),s=function(e){return o()(e,"localConfig.localizedLayerStyles")},p=function(e){var t=a()(e,"localConfig.plugins.dashboard",[]),r=c()(t,(function(e){return"DashboardEditor"===e.name}))||{};return a()(r,"cfg.catalog.localizedLayerStyles",!1)},v=function(e){return a()(e,"localConfig.localizedLayerStyles.name","mapstore_language")},b=(0,l.P1)(s,v,f.KV,(function(e,t,r){var n=[];return e&&n.push({name:t,value:r}),n}))},93201:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(64721),o=r.n(n),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("?")[0].split("@");if(t.length>1){var r=t[t.length-1];if(o()(["png","png8","jpeg","vnd.jpeg-png","gif"],r))return r}return null}},11847:(e,t,r)=>{"use strict";r.d(t,{ij:()=>O,w0:()=>m,vl:()=>g,K2:()=>h,Nw:()=>w});var n=r(72500),o=r.n(n),i=r(1469),a=r.n(i),u=r(47037),c=r.n(u),l=r(18446),f=r.n(l),s=r(89734),p=r.n(s),v=r(13311),b=r.n(v),d=r(64210);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=function(e){if(!e)return{};var t=!(0===e.indexOf("http")),r=t?[]:e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(t){var n=window.location;r[1]=n.protocol,r[3]=n.hostname,r[4]=n.port,r[5]=e}r[4]=""!==r[4]&&r[4]?r[4]:"https:"===r[1]?"443":"80",r[5]=r[5]?r[5]:e.slice(r[0].length);var o,i,a=(i=6,function(e){if(Array.isArray(e))return e}(o=r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(o,i)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=a[1],c=a[3],l=a[4],f=a[5],s=0===f.indexOf("/")?f.split("/")[1]:"";return{protocol:u,domain:c,port:l,rootPath:f,applicationRootPath:s}},m=function(e,t){var r=a()(e)?e[0]:e,n=a()(t)?t[0]:t;if(r===n)return!0;if(!r||!n)return!1;if(!c()(r)||!c()(n))return!1;var i=o().parse(r),u=o().parse(n),l=O(r),s=O(n),v=l.protocol===s.protocol,b=l.domain===s.domain,d=l.port===s.port,y=i.pathname===u.pathname,m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e===t)return!0;if(!e&&!t)return!0;var r=e?e.split("&").filter((function(e){return!!e})):[],n=t?t.split("&").filter((function(e){return!!e})):[];return f()(p()(r),p()(n))}(i.query,u.query);return v&&d&&b&&y&&m},g=function(e){return d.parse(e)},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/^(http(s{0,1}):\/\/)+?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/,r=new RegExp(t);return r.test(e)},w=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/^(http(s{0,1}):\/\/)+?[\w.\-{}]+(?:\.[\w\.-]+)+[\w\-\._~\/\;\.\%\:\&\=\?{}]+$/,n=new RegExp(r),o=n.test(e);if(!o)return!1;if(o&&!t)return!0;if(o&&t){var i=/\{(.*?)\}/.test(e);return 0===t.filter((function(e){return b()(i,e)})).length}return!1}}}]);